<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AgroVision - Smart Farmer's Assistant</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --primary-green: #4CAF50;
      --light-green: #8BC34A;
      --dark-green: #2E7D32;
      --earth-brown: #795548;
      --sky-blue: #87CEEB;
      --sun-yellow: #FFC107;
      --cloud-white: #F5F5F5;
      --text-dark: #333333;
      --text-light: #FFFFFF;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: #f9f9f9;
      color: var(--text-dark);
      line-height: 1.6;
    }

    /* Header Styles */
    header {
      background: linear-gradient(135deg, var(--primary-green) 0%, var(--dark-green) 100%);
      color: var(--text-light);
      padding: 1rem 2rem;
      display: flex;
      align-items: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      animation: slideDown 0.7s ease-out;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }

    .logo i {
      font-size: 2.5rem;
      color: var(--sun-yellow);
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
      animation: pulse 2s infinite;
    }

    .logo h1 {
      font-size: 2rem;
      font-weight: 700;
      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
    }

    /* Navigation Styles */
    nav {
      background-color: var(--light-green);
      padding: 0.8rem 0;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      animation: fadeIn 1s ease-out;
    }

    nav ul {
      display: flex;
      justify-content: center;
      list-style: none;
      flex-wrap: wrap;
    }

    nav ul li {
      margin: 0 1rem;
    }

    nav ul li a {
      color: var(--text-light);
      text-decoration: none;
      font-weight: 500;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      transition: all 0.3s ease;
      position: relative;
    }

    nav ul li a:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    nav ul li a::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: 0;
      left: 50%;
      background-color: var(--text-light);
      transition: all 0.3s ease;
    }

    nav ul li a:hover::after {
      width: 70%;
      left: 15%;
    }

    /* Hero Section */
    .hero {
      background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://images.unsplash.com/photo-1500937386664-56d1dfef3854?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80') no-repeat center center/cover;
      color: var(--text-light);
      padding: 5rem 2rem;
      text-align: center;
      animation: zoomOut 15s infinite alternate;
    }

    .hero-content {
      max-width: 800px;
      margin: 0 auto;
    }

    .hero h2 {
      font-size: 2.8rem;
      margin-bottom: 1rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      animation: fadeInUp 1s ease-out;
    }

    .hero p {
      font-size: 1.4rem;
      margin-bottom: 2rem;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
      animation: fadeInUp 1.2s ease-out;
    }

    .btn {
      display: inline-block;
      background-color: var(--sun-yellow);
      color: var(--text-dark);
      padding: 0.8rem 2rem;
      border-radius: 30px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      animation: pulse 2s infinite;
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }

    /* Features Section */
    .features {
      padding: 4rem 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .section-title {
      text-align: center;
      font-size: 2.2rem;
      margin-bottom: 2rem;
      color: var(--dark-green);
      position: relative;
      padding-bottom: 0.5rem;
    }

    .section-title::after {
      content: '';
      position: absolute;
      width: 80px;
      height: 4px;
      background-color: var(--primary-green);
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      border-radius: 2px;
    }

    /* Calculator Styles */
    .calculator {
      background-color: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      max-width: 600px;
      margin: 0 auto;
      animation: slideUp 0.8s ease-out;
    }

    .calculator label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--dark-green);
    }

    .calculator select, .calculator input {
      width: 100%;
      padding: 0.8rem;
      margin-bottom: 1.5rem;
      border: 1px solid #ddd;
      border-radius: 5px;
      transition: all 0.3s ease;
    }

    .calculator select:focus, .calculator input:focus {
      outline: none;
      border-color: var(--primary-green);
      box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);
    }

    .calculator button {
      background-color: var(--primary-green);
      color: white;
      border: none;
      padding: 1rem 2rem;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 600;
      width: 100%;
      transition: all 0.3s ease;
    }

    .calculator button:hover {
      background-color: var(--dark-green);
      transform: translateY(-2px);
    }

    #fertilizer-result {
      margin-top: 1.5rem;
      padding: 1rem;
      background-color: #E8F5E9;
      border-radius: 5px;
      border-left: 4px solid var(--primary-green);
      animation: fadeIn 0.5s ease-out;
    }

    /* Market Prices Styles */
    .market-prices-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 2rem;
      margin-top: 2rem;
    }

    .price-card {
      background: white;
      border-radius: 10px;
      padding: 1.5rem;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      flex: 1;
      min-width: 250px;
      text-align: center;
      transition: transform 0.3s ease;
    }

    .price-card:hover {
      transform: translateY(-5px);
    }

    .price-card h3 {
      color: var(--dark-green);
      margin-bottom: 1rem;
    }

    .price-card .price {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--primary-green);
    }

    .price-card .trend {
      margin-top: 0.5rem;
      font-size: 0.9rem;
    }

    .trend.up {
      color: #4CAF50;
    }

    .trend.down {
      color: #F44336;
    }

    /* Weather Styles */
    .weather-container {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      justify-content: center;
      margin-top: 2rem;
    }

    .weather-card {
      background: white;
      border-radius: 10px;
      padding: 1.5rem;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      text-align: center;
      flex: 1;
      min-width: 200px;
      animation: fadeIn 1s ease-out;
    }

    .weather-card h3 {
      color: var(--dark-green);
      margin-bottom: 1rem;
    }

    .weather-icon {
      font-size: 3rem;
      color: var(--sky-blue);
      margin: 1rem 0;
    }

    .temperature {
      font-size: 2rem;
      font-weight: 700;
      color: var(--earth-brown);
    }

    /* Charts Container */
    .charts-container {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      justify-content: center;
      margin-top: 2rem;
    }

    .chart-box {
      background: white;
      border-radius: 10px;
      padding: 1.5rem;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      flex: 1;
      min-width: 300px;
      max-width: 500px;
    }

    .chart-box h3 {
      text-align: center;
      color: var(--dark-green);
      margin-bottom: 1rem;
    }

    /* Offers Styles */
    .offers-container {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      justify-content: center;
      margin-top: 2rem;
    }

    .offer-card {
      background: linear-gradient(135deg, var(--light-green) 0%, var(--primary-green) 100%);
      border-radius: 10px;
      padding: 1.5rem;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      color: white;
      flex: 1;
      min-width: 250px;
      position: relative;
      overflow: hidden;
      animation: pulse 2s infinite;
    }

    .offer-card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: rgba(255, 255, 255, 0.1);
      transform: rotate(45deg);
      animation: shine 3s infinite;
    }

    .offer-card h3 {
      margin-bottom: 1rem;
      position: relative;
      z-index: 1;
    }

    .offer-card p {
      position: relative;
      z-index: 1;
    }

    /* Map Styles */
    .map-container {
      margin-top: 2rem;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    /* Chatbot Styles */
    .chatbot {
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 1000;
    }

    .chatbot-btn {
      width: 60px;
      height: 60px;
      background-color: var(--primary-green);
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      animation: bounce 2s infinite;
    }

    .chatbot-window {
      position: absolute;
      bottom: 70px;
      right: 0;
      width: 350px;
      height: 450px;
      background-color: white;
      border-radius: 15px;
      box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
      display: none;
      flex-direction: column;
      overflow: hidden;
    }

    .chatbot-header {
      background-color: var(--primary-green);
      color: white;
      padding: 1rem;
      font-weight: 600;
      text-align: center;
    }

    .chatbot-messages {
      flex: 1;
      padding: 1rem;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    .message {
      padding: 0.8rem;
      border-radius: 15px;
      max-width: 80%;
      animation: fadeIn 0.3s ease-out;
    }

    .bot-message {
      background-color: #E8F5E9;
      align-self: flex-start;
      border-bottom-left-radius: 5px;
    }

    .user-message {
      background-color: var(--sky-blue);
      color: white;
      align-self: flex-end;
      border-bottom-right-radius: 5px;
    }

    .chatbot-input {
      display: flex;
      padding: 0.8rem;
      border-top: 1px solid #ddd;
    }

    .chatbot-input input {
      flex: 1;
      padding: 0.8rem;
      border: 1px solid #ddd;
      border-radius: 20px;
      outline: none;
    }

    .chatbot-input button {
      background-color: var(--primary-green);
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      margin-left: 0.5rem;
      cursor: pointer;
    }

    /* Footer Styles */
    footer {
      background-color: var(--dark-green);
      color: var(--text-light);
      text-align: center;
      padding: 2rem;
      margin-top: 4rem;
    }

    /* Animations */
    @keyframes slideDown {
      from {
        transform: translateY(-100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(40px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
      100% {
        transform: scale(1);
      }
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% {
        transform: translateY(0);
      }
      40% {
        transform: translateY(-10px);
      }
      60% {
        transform: translateY(-5px);
      }
    }

    @keyframes zoomOut {
      from {
        transform: scale(1.1);
      }
      to {
        transform: scale(1);
      }
    }

    @keyframes shine {
      0% {
        transform: rotate(45deg) translateX(-100%);
      }
      100% {
        transform: rotate(45deg) translateX(100%);
      }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      nav ul {
        flex-direction: column;
        align-items: center;
      }
      
      nav ul li {
        margin: 0.3rem 0;
      }
      
      .hero h2 {
        font-size: 2rem;
      }
      
      .hero p {
        font-size: 1.1rem;
      }
      
      .chatbot-window {
        width: 300px;
        right: -20px;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="logo">
      <i class="fas fa-leaf"></i>
      <h1>AgroVision</h1>
    </div>
  </header>

  <!-- Navigation -->
  <nav>
    <ul>
      <li><a href="#crop-prediction">Crop Prediction</a></li>
      <li><a href="#market-prices">Market Prices</a></li>
      <li><a href="#weather">Weather</a></li>
      <li><a href="#pesticides">Pesticides</a></li>
      <li><a href="#fertilizers">Fertilizers</a></li>
      <li><a href="#offers">Offers</a></li>
      <li><a href="#map">Nearby Mills</a></li>
    </ul>
  </nav>

  <!-- Hero -->
  <section class="hero">
    <div class="hero-content">
      <h2>Empowering Farmers with AI + Data</h2>
      <p>Smart predictions, fertilizer calculators, live weather & market prices in one platform.</p>
      <a href="#calculator" class="btn">Try Fertilizer Calculator</a>
    </div>
  </section>

  <!-- Fertilizer Calculator -->
  <section id="calculator" class="features">
    <h2 class="section-title">Fertilizer Calculator</h2>
    <div class="calculator">
      <label>Crop Type</label>
      <select id="crop">
        <option value="wheat">Wheat</option>
        <option value="rice">Rice</option>
        <option value="corn">Corn</option>
        <option value="sugarcane">Sugarcane</option>
        <option value="cotton">Cotton</option>
      </select>
      <label>Land Area (acres)</label>
      <input type="number" id="area">
      <label>Soil Type</label>
      <select id="soil">
        <option value="loamy">Loamy</option>
        <option value="sandy">Sandy</option>
        <option value="clay">Clay</option>
        <option value="silt">Silt</option>
      </select>
      <button onclick="calculateFertilizer()">Calculate</button>
      <div id="fertilizer-result"></div>
    </div>
    
    <!-- Fertilizer Chart -->
    <div class="charts-container">
      <div class="chart-box">
        <h3>Recommended Fertilizer Composition</h3>
        <canvas id="fertilizerChart"></canvas>
      </div>
    </div>
  </section>

  <!-- Market Prices -->
  <section id="market-prices" class="features">
    <h2 class="section-title">Market Prices</h2>
    <p>Live crop prices from nearby markets</p>
    
    <div class="market-prices-container">
      <div class="price-card">
        <h3>Wheat</h3>
        <div class="price">₹2100 / quintal</div>
        <div class="trend up">↑ 2.5% from last week</div>
      </div>
      <div class="price-card">
        <h3>Rice</h3>
        <div class="price">₹2500 / quintal</div>
        <div class="trend up">↑ 1.8% from last week</div>
      </div>
      <div class="price-card">
        <h3>Corn</h3>
        <div class="price">₹1800 / quintal</div>
        <div class="trend down">↓ 0.8% from last week</div>
      </div>
    </div>
    
    <!-- Market Trends Chart -->
    <div class="charts-container">
      <div class="chart-box">
        <h3>Price Trends (Last 30 Days)</h3>
        <canvas id="marketTrendsChart"></canvas>
      </div>
    </div>
  </section>

  <!-- Weather -->
  <section id="weather" class="features">
    <h2 class="section-title">Weather Forecast</h2>
    
    <div class="weather-container">
      <div class="weather-card">
        <h3>Today</h3>
        <div class="weather-icon"><i class="fas fa-sun"></i></div>
        <div class="temperature">28°C</div>
        <p>Clear sky</p>
      </div>
      <div class="weather-card">
        <h3>Tomorrow</h3>
        <div class="weather-icon"><i class="fas fa-cloud-sun"></i></div>
        <div class="temperature">27°C</div>
        <p>Partly cloudy</p>
      </div>
      <div class="weather-card">
        <h3>Next Day</h3>
        <div class="weather-icon"><i class="fas fa-cloud-rain"></i></div>
        <div class="temperature">25°C</div>
        <p>Light showers</p>
      </div>
    </div>
    
    <!-- Rainfall Prediction Chart -->
    <div class="charts-container">
      <div class="chart-box">
        <h3>Weekly Rainfall Prediction</h3>
        <canvas id="rainfallChart"></canvas>
      </div>
    </div>
  </section>

  <!-- Offers -->
  <section id="offers" class="features">
    <h2 class="section-title">Upcoming Offers</h2>
    
    <div class="offers-container">
      <div class="offer-card">
        <h3>Special Discount</h3>
        <p>50% discount on urea fertilizer - till Sept 15</p>
      </div>
      <div class="offer-card">
        <h3>Buy More Save More</h3>
        <p>Buy 2 get 1 free pesticide pack - valid this month</p>
      </div>
    </div>
  </section>

  <!-- Map -->
  <section id="map" class="features">
    <h2 class="section-title">Nearby Mills & Markets</h2>
    <div class="map-container">
      <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d30264.4696
            <!-- Map -->
      <section id="map" class="features">
        <h2 class="section-title">Nearby Mills & Markets</h2>
        <div class="map-container">
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d30264.46961997031!2d73.84935636953125!3d18.518599999999998!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3bc2c067fd10a881%3A0xde40c9b5df5c2a3a!2sPune%2C%20Maharashtra!5e0!3m2!1sen!2sin!4v1694012345678!5m2!1sen!2sin" width="100%" height="400" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
      </section>

      <!-- Chatbot -->
      <div class="chatbot">
        <div class="chatbot-btn" onclick="toggleChat()"><i class="fas fa-comments"></i></div>
        <div class="chatbot-window" id="chat-window">
          <div class="chatbot-header">AgroVision Assistant</div>
          <div class="chatbot-messages" id="chat-messages">
            <div class="message bot-message">Hello! I'm your farming assistant. How can I help you today?</div>
          </div>
          <div class="chatbot-input">
            <input id="chat-input" placeholder="Type your message..." onkeypress="handleKeyPress(event)">
            <button onclick="sendMessage()">➤</button>
          </div>
        </div>
      </div>

      <footer>
        <p>© 2025 AgroVision | Smart Farming Platform</p>
      </footer>

      <script>
        // Initialize charts
        document.addEventListener('DOMContentLoaded', function() {
          // Fertilizer composition chart
          const fertilizerCtx = document.getElementById('fertilizerChart').getContext('2d');
          window.fertilizerChart = new Chart(fertilizerCtx, {
            type: 'doughnut',
            data: {
              labels: ['Nitrogen', 'Phosphorus', 'Potassium', 'Other'],
              datasets: [{
                data: [40, 25, 25, 10],
                backgroundColor: [
                  '#4CAF50',
                  '#8BC34A',
                  '#CDDC39',
                  '#FFC107'
                ],
                borderWidth: 1
              }]
            },
            options: {
              responsive: true,
              plugins: {
                legend: {
                  position: 'bottom'
                }
              }
            }
          });

          // Market trends chart
          const marketCtx = document.getElementById('marketTrendsChart').getContext('2d');
          window.marketTrendsChart = new Chart(marketCtx, {
            type: 'line',
            data: {
              labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
              datasets: [
                {
                  label: 'Wheat',
                  data: [2050, 2080, 2100, 2100],
                  borderColor: '#4CAF50',
                  tension: 0.1,
                  fill: false
                },
                {
                  label: 'Rice',
                  data: [2450, 2480, 2500, 2500],
                  borderColor: '#2196F3',
                  tension: 0.1,
                  fill: false
                },
                {
                  label: 'Corn',
                  data: [1820, 1810, 1800, 1800],
                  borderColor: '#FFC107',
                  tension: 0.1,
                  fill: false
                }
              ]
            },
            options: {
              responsive: true,
              scales: {
                y: {
                  beginAtZero: false,
                  title: {
                    display: true,
                    text: 'Price (₹/quintal)'
                  }
                }
              }
            }
          });

          // Rainfall prediction chart
          const rainfallCtx = document.getElementById('rainfallChart').getContext('2d');
          window.rainfallChart = new Chart(rainfallCtx, {
            type: 'bar',
            data: {
              labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
              datasets: [{
                label: 'Rainfall (mm)',
                data: [2, 5, 12, 8, 3, 0, 0],
                backgroundColor: '#2196F3',
                borderWidth: 1
              }]
            },
            options: {
              responsive: true,
              scales: {
                y: {
                  beginAtZero: true,
                  title: {
                    display: true,
                    text: 'Rainfall (mm)'
                  }
                }
              }
            }
          });
        });

        // Fertilizer calculator function
        function calculateFertilizer() {
          const crop = document.getElementById('crop').value;
          const area = document.getElementById('area').value;
          const soil = document.getElementById('soil').value;
          
          if (!area || area <= 0) {
            alert('Please enter a valid land area');
            return;
          }
          
          // Simple calculation based on crop type
          let nitrogen, phosphorus, potassium;
          
          switch(crop) {
            case 'wheat':
              nitrogen = 120 * area;
              phosphorus = 60 * area;
              potassium = 40 * area;
              break;
            case 'rice':
              nitrogen = 100 * area;
              phosphorus = 50 * area;
              potassium = 50 * area;
              break;
            case 'corn':
              nitrogen = 150 * area;
              phosphorus = 70 * area;
              potassium = 70 * area;
              break;
            case 'sugarcane':
              nitrogen = 200 * area;
              phosphorus = 80 * area;
              potassium = 100 * area;
              break;
            case 'cotton':
              nitrogen = 80 * area;
              phosphorus = 40 * area;
              potassium = 30 * area;
              break;
            default:
              nitrogen = 100 * area;
              phosphorus = 50 * area;
              potassium = 50 * area;
          }
          
          // Adjust based on soil type
          if (soil === 'sandy') {
            nitrogen *= 1.2;
            phosphorus *= 1.1;
            potassium *= 1.1;
          } else if (soil === 'clay') {
            nitrogen *= 0.9;
            phosphorus *= 0.9;
            potassium *= 0.9;
          } else if (soil === 'silt') {
            nitrogen *= 1.0;
            phosphorus *= 1.0;
            potassium *= 1.0;
          }
          
          const resultDiv = document.getElementById('fertilizer-result');
          resultDiv.innerHTML = `
            <h3>Recommended Fertilizer for ${area} acres of ${crop} (${soil} soil):</h3>
            <p>Nitrogen: ${nitrogen.toFixed(2)} kg</p>
            <p>Phosphorus: ${phosphorus.toFixed(2)} kg</p>
            <p>Potassium: ${potassium.toFixed(2)} kg</p>
          `;
          
          // Update the chart
          window.fertilizerChart.data.datasets[0].data = [
            nitrogen, phosphorus, potassium, (nitrogen * 0.1)
          ];
          window.fertilizerChart.update();
        }

        // Chatbot functions
        function toggleChat() {
          const chatWindow = document.getElementById('chat-window');
          chatWindow.style.display = chatWindow.style.display === 'flex' ? 'none' : 'flex';
        }

        function handleKeyPress(event) {
          if (event.key === 'Enter') {
            sendMessage();
          }
        }

        function sendMessage() {
          const input = document.getElementById('chat-input');
          const message = input.value.trim();
          
          if (message === '') return;
          
          // Add user message
          addMessage(message, 'user');
          input.value = '';
          
          // Generate bot response after a short delay
          setTimeout(() => {
            generateBotResponse(message);
          }, 500);
        }

        function addMessage(text, sender) {
          const messagesContainer = document.getElementById('chat-messages');
          const messageDiv = document.createElement('div');
          messageDiv.classList.add('message');
          messageDiv.classList.add(sender === 'user' ? 'user-message' : 'bot-message');
          messageDiv.textContent = text;
          messagesContainer.appendChild(messageDiv);
          messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function generateBotResponse(userMessage) {
          const lowerMessage = userMessage.toLowerCase();
          let response = '';
          
          if (lowerMessage.includes('fertilizer') || lowerMessage.includes('nutrient')) {
            response = 'For fertilizer recommendations, use our calculator tool above. It considers your crop type, land area, and soil type to give personalized suggestions.';
          } else if (lowerMessage.includes('weather') || lowerMessage.includes('rain')) {
            response = 'Check the weather section for detailed forecasts and rainfall predictions. This can help you plan your irrigation and harvesting activities.';
          } else if (lowerMessage.includes('price') || lowerMessage.includes('market')) {
            response = 'Current market prices are available in the Market Prices section. You can see trends for wheat, rice, corn and other crops.';
          } else if (lowerMessage.includes('hello') || lowerMessage.includes('hi')) {
            response = 'Hello! How can I assist with your farming needs today?';
          } else if (lowerMessage.includes('bye') || lowerMessage.includes('thank')) {
            response = 'You\'re welcome! Feel free to ask if you have more questions.';
          } else {
            response = 'I\'m here to help with farming-related questions. You can ask me about fertilizers, weather, market prices, or other agricultural topics.';
          }
          
          addMessage(response, 'bot');
        }

        // Simple weather API simulation
        function fetchWeather() {
          const weatherDiv = document.getElementById('weather-info');
          
          // In a real application, you would fetch this from a weather API
          const weatherData = {
            temperature: 28,
            condition: 'Sunny',
            humidity: 65,
            wind: 12
          };
          
          weatherDiv.innerHTML = `
            <div class="weather-card">
              <h3>Current Weather</h3>
              <div class="weather-icon"><i class="fas fa-sun"></i></div>
              <div class="temperature">${weatherData.temperature}°C</div>
              <p>Condition: ${weatherData.condition}</p>
              <p>Humidity: ${weatherData.humidity}%</p>
              <p>Wind: ${weatherData.wind} km/h</p>
            </div>
          `;
        }

        // Initialize weather on load
        window.onload = function() {
          fetchWeather();
        };
      </script>
    </body>
    </html>